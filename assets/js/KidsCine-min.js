function recalculateCart(e){var t=0;$(".basket-product").each(function(){t+=parseFloat($(this).children(".subtotal").text())});var o=t,a=parseFloat($(".promo-value").text());a&&(t>=10?o-=a:(alert("La commande doit être supérieure à 10 € pour bénéficier du code promo."),$(".summary-promo").addClass("hide"))),e?$(".total-value").fadeOut(fadeTime,function(){$("#basket-total").html(o.toFixed(2)),$(".total-value").fadeIn(fadeTime)}):$(".final-value").fadeOut(fadeTime,function(){$("#basket-subtotal").html(t.toFixed(2)),$("#basket-total").html(o.toFixed(2)),0==o?$(".checkout-cta").fadeOut(fadeTime):$(".checkout-cta").fadeIn(fadeTime),$(".final-value").fadeIn(fadeTime)})}function updateQuantity(e){var t=$(e).parent().parent(),o=parseFloat(t.children(".price").text()),a=$(e).val(),n=o*a;t.children(".subtotal").each(function(){$(this).fadeOut(fadeTime,function(){$(this).text(n.toFixed(2)),recalculateCart(),$(this).fadeIn(fadeTime)})}),t.find(".item-quantity").text(a),updateSumItems()}function updateSumItems(){var e=0;$(".quantity input").each(function(){e+=parseInt($(this).val())}),$(".total-items").text(e)}function removeItem(e){var t=$(e).parent().parent();t.slideUp(fadeTime,function(){t.remove(),recalculateCart(),updateSumItems()})}function scrollFunction(){document.body.scrollTop>3100||document.documentElement.scrollTop>3100?document.getElementById("shopBasket").style.display="block":document.getElementById("shopBasket").style.display="none"}function hideBasket(){(document.body.scrollTop>5020||document.documentElement.scrollTop>5020)&&(document.getElementById("shopBasket").style.display="none")}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}var promoCode,promoPrice,fadeTime=300;$(".quantity input").change(function(){updateQuantity(this)}),$(".remove button").click(function(){removeItem(this)}),$(document).ready(function(){updateSumItems()}),$(".promo-code-cta").click(function(){promoCode=$("#promo-code").val(),"BECODE"==promoCode||"becode"==promoCode?promoPrice?promoCode&&(promoPrice*=1):promoPrice=10:""!=promoCode&&(alert("Code promo invalide"),promoPrice=0),promoPrice&&($(".summary-promo").removeClass("hide"),$(".promo-value").text(promoPrice.toFixed(2)),recalculateCart(!0))}),window.onscroll=function(){scrollFunction(),hideBasket()},window.onload=function(){document.getElementById("shopBasket").style.display="none"};